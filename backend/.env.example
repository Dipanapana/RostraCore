# =============================================================================
# GuardianOS Environment Configuration
# Copy this file to .env and fill in your values
# =============================================================================

# =============================================================================
# APPLICATION
# =============================================================================
APP_NAME=GuardianOS
ENVIRONMENT=development  # development, staging, production

# =============================================================================
# DATABASE
# =============================================================================
DATABASE_URL=postgresql://rostracore_user:your_secure_password@localhost:5432/rostracore

# =============================================================================
# API
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
DEBUG=True  # MUST be False in production
API_V1_PREFIX=/api/v1

# =============================================================================
# SECURITY (CRITICAL - CHANGE IN PRODUCTION)
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-here-generate-with-openssl-rand-hex-32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
PASSWORD_MIN_LENGTH=12
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=30

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================
FRONTEND_URL=http://localhost:3000
# Comma-separated for multiple origins
ALLOWED_ORIGINS=http://localhost:3000

# =============================================================================
# ROSTERING CONSTRAINTS (BCEA Compliance)
# =============================================================================
# TESTING MODE (Development Only)
TESTING_MODE=True  # MUST be False in production
SKIP_CERTIFICATION_CHECK=True  # MUST be False in production
SKIP_AVAILABILITY_CHECK=True  # MUST be False in production
SKIP_SKILL_MATCHING=False

# PRODUCTION MODE (BCEA Compliant)
MAX_HOURS_WEEK=48  # Basic Conditions of Employment Act
MIN_REST_HOURS=8   # BCEA requirement
OT_MULTIPLIER=1.5  # Overtime rate (150%)
MAX_DISTANCE_KM=50.0  # Maximum travel distance

# Rostering Algorithm
ROSTER_ALGORITHM=auto  # Options: hungarian, milp, auto
FAIRNESS_WEIGHT=0.2  # 0-1, higher = more fair distribution
MILP_TIME_LIMIT=180  # seconds

# =============================================================================
# PAGINATION
# =============================================================================
DEFAULT_PAGE_SIZE=50
MAX_PAGE_SIZE=100

# =============================================================================
# MONITORING & ERROR TRACKING (Sentry.io)
# =============================================================================
SENTRY_DSN=  # Optional: https://YOUR_PROJECT@sentry.io/YOUR_PROJECT_ID
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1  # 10% of transactions
SENTRY_PROFILES_SAMPLE_RATE=0.1  # 10% profiling

# =============================================================================
# REDIS & CACHING
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=  # Optional, recommended in production

# =============================================================================
# CELERY (Background Tasks)
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# Option 1: SendGrid (Recommended)
SENDGRID_API_KEY=
FROM_EMAIL=noreply@guardianos.co.za
FROM_NAME=GuardianOS

# Option 2: SMTP (Alternative)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_TLS=True

# =============================================================================
# FEATURE FLAGS (MVP)
# =============================================================================
ENABLE_EMAIL_VERIFICATION=True
ENABLE_ORGANIZATION_APPROVAL=True
ENABLE_RATE_LIMITING=True

# Non-MVP Features (Keep disabled)
ENABLE_MARKETPLACE=False
ENABLE_CV_GENERATION=False
ENABLE_GUARD_RATINGS=False
ENABLE_ADVANCED_ANALYTICS=False

# =============================================================================
# PRICING
# =============================================================================
MVP_MONTHLY_RATE_PER_GUARD=45.00  # ZAR per guard per month
MVP_CURRENCY=ZAR

# =============================================================================
# PAYFAST PAYMENT GATEWAY (South Africa)
# =============================================================================
# Get credentials from https://www.payfast.co.za
PAYFAST_MERCHANT_ID=
PAYFAST_MERCHANT_KEY=
PAYFAST_PASSPHRASE=  # Recommended for production
PAYFAST_SANDBOX=True  # MUST be False in production
BACKEND_URL=http://localhost:8000  # Your backend URL for webhooks

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# SUPERADMIN SETTINGS (Phase 5)
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SUPERADMIN_SECRET_TOKEN=  # Keep SECRET - only for creating superadmin accounts

# =============================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
# [ ] DEBUG=False
# [ ] TESTING_MODE=False
# [ ] SKIP_CERTIFICATION_CHECK=False
# [ ] SKIP_AVAILABILITY_CHECK=False
# [ ] SECRET_KEY is strong random value (32+ chars)
# [ ] DATABASE_URL points to production database
# [ ] ALLOWED_ORIGINS only includes production domains
# [ ] PAYFAST_SANDBOX=False (for real payments)
# [ ] SENTRY_DSN is configured
# [ ] REDIS_PASSWORD is set
# [ ] Email service configured
# [ ] SUPERADMIN_SECRET_TOKEN set and kept secret
# [ ] SSL/TLS certificates configured
# [ ] Database backups automated
