{
  "permissions": {
    "allow": [
      "Bash(alembic current:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT table_name, column_name FROM information_schema.columns WHERE table_name=''''clients'''' ORDER BY ordinal_position;\")",
      "Bash(timeout 3 curl:*)",
      "Bash(timeout 3 echo:*)",
      "Bash(timeout 2 echo:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"UPDATE employees SET email = REPLACE(email, '' '', '''') WHERE email LIKE ''% %'';\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT employee_id, first_name, last_name, email FROM employees WHERE email LIKE ''% %'' ORDER BY employee_id;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\":*)",
      "Bash(where:*)",
      "Bash(wsl which:*)",
      "Bash(wsl sudo apt update:*)",
      "Bash(wsl sudo apt install:*)",
      "Bash(wsl bash -c \"cd /tmp && wget http://archive.ubuntu.com/ubuntu/pool/main/g/gcc-14/libatomic1_14.2.0-4ubuntu2~24.04_amd64.deb && sudo dpkg -i libatomic1_14.2.0-4ubuntu2~24.04_amd64.deb && sudo apt install -f -y\")",
      "Bash(start /B redis-server.exe)",
      "Bash(redis-server.exe:*)",
      "Bash(./redis-server.exe)",
      "Bash(celery:*)",
      "Bash(redis-cli.exe FLUSHALL:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as total_employees, COUNT(*) FILTER (WHERE is_active = true) as active_employees FROM employees;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as total_sites, COUNT(*) FILTER (WHERE is_active = true) as active_sites FROM sites;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as total_shifts FROM shifts WHERE start_time >= CURRENT_DATE;\")",
      "Bash(timeout 120 python:*)",
      "Bash(timeout 15 echo:*)",
      "Bash(timeout 20 echo:*)",
      "Bash(git checkout:*)",
      "Bash(alembic revision:*)",
      "Bash(timeout 20 python:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nchore: Remove marketplace and advanced features (Phase 1 MVP Cleanup)\n\nThis commit removes all non-MVP features to create a clean, focused codebase for the SaaS platform.\n\nBackend Changes:\n- Removed 17 endpoint files (marketplace, analytics, attendance, expenses, incidents, etc.)\n- Removed 18 model files (guard_applicants, job_postings, CV generation, etc.)\n- Updated main.py to remove deleted endpoint imports\n- Updated models __init__.py to only include MVP core models\n- Cleaned up schemas.py (removed Expense, Attendance schemas)\n- Simplified payroll.py (removed expense and commission tracking)\n- Stubbed payments.py for future subscription integration (Phase 4)\n- Stubbed superadmin_auth.py for Phase 5 implementation\n- Updated superadmin_analytics_service.py for SaaS model\n- Fixed subscription_plans.py to remove marketplace dependencies\n\nFrontend Changes:\n- Removed marketplace pages\n- Removed employee portal pages\n- Removed specialized dashboards (executive, financial, operations, people)\n- Removed admin advanced features (analytics-debug, data-insights, employee-permissions, leave-approvals)\n- Removed attendance and expenses pages\n- Updated Sidebar navigation to show only MVP features\n\nDatabase:\n- Created migration to drop 21 unused tables\n- Tables removed: marketplace features, advanced features, analytics tables, unused/duplicate tables\n- Kept 14 core tables for MVP\n\nMVP Core Features Remaining:\n- Organizations (multi-tenancy)\n- Employees (guards)\n- Clients (municipalities)\n- Sites (guard posts)\n- Shifts\n- Shift assignments\n- Certifications\n- Availability\n- Roster generation\n- Basic payroll\n- Subscription plans (stub for Phase 4)\n\nNext: Phase 2 - Redesign shift assignment structure for multiple guards per shift\n\nGenerated with Claude Code\nhttps://claude.com/claude-code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat: Add multi-guard shift support (Phase 2 - Part 1)\n\nImplemented database and model changes to support multiple guards per shift.\n\nDatabase Changes:\n- Created migration to add required_staff column to shifts table\n- Added status column to shift_assignments for workflow (pending/confirmed/cancelled/completed)\n- Added unique constraint on (shift_id, employee_id) to prevent duplicate assignments\n- Removed assigned_employee_id column from shifts table\n- Made roster_id nullable in shift_assignments (assignments can be manual)\n\nModel Changes:\n- Updated Shift model: removed assigned_employee_id, added required_staff\n- Changed shift-assignment relationship from one-to-one to one-to-many\n- Added AssignmentStatus enum (PENDING, CONFIRMED, CANCELLED, COMPLETED)\n- Updated ShiftAssignment model: added status field, unique constraint\n- Made roster_id optional to support manual assignments\n\nSchema Changes:\n- Updated ShiftBase/ShiftCreate/ShiftUpdate: removed assigned_employee_id, added required_staff\n- Added ShiftAssignmentBase/Create/Response schemas for assignment management\n\nThese changes enable:\n- Multiple guards assigned to a single shift\n- Pending/confirmed workflow for shift assignments\n- Different shifts can require different numbers of guards\n- Admin review and approval of roster assignments\n\nNext: Update shift endpoints and roster generator logic\n\nGenerated with Claude Code\nhttps://claude.com/claude-code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")"
    ],
    "deny": [],
    "ask": []
  }
}
