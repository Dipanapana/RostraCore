{
  "permissions": {
    "allow": [
      "Bash(alembic current:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT table_name, column_name FROM information_schema.columns WHERE table_name=''''clients'''' ORDER BY ordinal_position;\")",
      "Bash(timeout 3 curl:*)",
      "Bash(timeout 3 echo:*)",
      "Bash(timeout 2 echo:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"UPDATE employees SET email = REPLACE(email, '' '', '''') WHERE email LIKE ''% %'';\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT employee_id, first_name, last_name, email FROM employees WHERE email LIKE ''% %'' ORDER BY employee_id;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\":*)",
      "Bash(where:*)",
      "Bash(wsl which:*)",
      "Bash(wsl sudo apt update:*)",
      "Bash(wsl sudo apt install:*)",
      "Bash(wsl bash -c \"cd /tmp && wget http://archive.ubuntu.com/ubuntu/pool/main/g/gcc-14/libatomic1_14.2.0-4ubuntu2~24.04_amd64.deb && sudo dpkg -i libatomic1_14.2.0-4ubuntu2~24.04_amd64.deb && sudo apt install -f -y\")",
      "Bash(start /B redis-server.exe)",
      "Bash(redis-server.exe:*)",
      "Bash(./redis-server.exe)",
      "Bash(celery:*)",
      "Bash(redis-cli.exe FLUSHALL:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as total_employees, COUNT(*) FILTER (WHERE is_active = true) as active_employees FROM employees;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as total_sites, COUNT(*) FILTER (WHERE is_active = true) as active_sites FROM sites;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as total_shifts FROM shifts WHERE start_time >= CURRENT_DATE;\")",
      "Bash(timeout 120 python:*)",
      "Bash(timeout 15 echo:*)",
      "Bash(timeout 20 echo:*)",
      "Bash(git checkout:*)",
      "Bash(alembic revision:*)",
      "Bash(timeout 20 python:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nchore: Remove marketplace and advanced features (Phase 1 MVP Cleanup)\n\nThis commit removes all non-MVP features to create a clean, focused codebase for the SaaS platform.\n\nBackend Changes:\n- Removed 17 endpoint files (marketplace, analytics, attendance, expenses, incidents, etc.)\n- Removed 18 model files (guard_applicants, job_postings, CV generation, etc.)\n- Updated main.py to remove deleted endpoint imports\n- Updated models __init__.py to only include MVP core models\n- Cleaned up schemas.py (removed Expense, Attendance schemas)\n- Simplified payroll.py (removed expense and commission tracking)\n- Stubbed payments.py for future subscription integration (Phase 4)\n- Stubbed superadmin_auth.py for Phase 5 implementation\n- Updated superadmin_analytics_service.py for SaaS model\n- Fixed subscription_plans.py to remove marketplace dependencies\n\nFrontend Changes:\n- Removed marketplace pages\n- Removed employee portal pages\n- Removed specialized dashboards (executive, financial, operations, people)\n- Removed admin advanced features (analytics-debug, data-insights, employee-permissions, leave-approvals)\n- Removed attendance and expenses pages\n- Updated Sidebar navigation to show only MVP features\n\nDatabase:\n- Created migration to drop 21 unused tables\n- Tables removed: marketplace features, advanced features, analytics tables, unused/duplicate tables\n- Kept 14 core tables for MVP\n\nMVP Core Features Remaining:\n- Organizations (multi-tenancy)\n- Employees (guards)\n- Clients (municipalities)\n- Sites (guard posts)\n- Shifts\n- Shift assignments\n- Certifications\n- Availability\n- Roster generation\n- Basic payroll\n- Subscription plans (stub for Phase 4)\n\nNext: Phase 2 - Redesign shift assignment structure for multiple guards per shift\n\nGenerated with Claude Code\nhttps://claude.com/claude-code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat: Add multi-guard shift support (Phase 2 - Part 1)\n\nImplemented database and model changes to support multiple guards per shift.\n\nDatabase Changes:\n- Created migration to add required_staff column to shifts table\n- Added status column to shift_assignments for workflow (pending/confirmed/cancelled/completed)\n- Added unique constraint on (shift_id, employee_id) to prevent duplicate assignments\n- Removed assigned_employee_id column from shifts table\n- Made roster_id nullable in shift_assignments (assignments can be manual)\n\nModel Changes:\n- Updated Shift model: removed assigned_employee_id, added required_staff\n- Changed shift-assignment relationship from one-to-one to one-to-many\n- Added AssignmentStatus enum (PENDING, CONFIRMED, CANCELLED, COMPLETED)\n- Updated ShiftAssignment model: added status field, unique constraint\n- Made roster_id optional to support manual assignments\n\nSchema Changes:\n- Updated ShiftBase/ShiftCreate/ShiftUpdate: removed assigned_employee_id, added required_staff\n- Added ShiftAssignmentBase/Create/Response schemas for assignment management\n\nThese changes enable:\n- Multiple guards assigned to a single shift\n- Pending/confirmed workflow for shift assignments\n- Different shifts can require different numbers of guards\n- Admin review and approval of roster assignments\n\nNext: Update shift endpoints and roster generator logic\n\nGenerated with Claude Code\nhttps://claude.com/claude-code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(employees.py)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat: Add multi-guard shift endpoints (Phase 2 - Part 2)\n\nUpdated shift endpoints to support multiple guards per shift with assignment workflow.\n\nNew Shift Assignment Endpoints:\n- GET /shifts/{shift_id}/assignments - List all guards assigned to a shift\n- POST /shifts/{shift_id}/assign/{employee_id} - Manually assign guard to shift\n- DELETE /shifts/{shift_id}/assignments/{employee_id} - Remove guard from shift\n- POST /shifts/{shift_id}/assignments/{assignment_id}/confirm - Confirm pending assignment\n- GET /employees/{employee_id}/shifts - Get all shifts for an employee\n\nFeatures:\n- Assignment status workflow: pending → confirmed → completed\n- Prevents duplicate assignments (unique constraint)\n- Checks shift capacity (required_staff limit)\n- Validates shift and employee existence\n- Calculates assignment costs automatically\n- Supports manual and roster-based assignments\n\nWorkflow:\n1. Guards assigned to shifts (manual or via roster)\n2. Assignments created with ''pending'' status\n3. Admin reviews and confirms assignments\n4. Status changes to ''confirmed''\n5. After shift completes, status becomes ''completed''\n\nNext: Update roster generator to use new assignment structure\n\nGenerated with Claude Code\nhttps://claude.com/claude-code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit:*)",
      "Bash(alembic heads:*)",
      "Bash(alembic history:*)",
      "Bash(alembic show:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"\\d employees\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"\\d organizations\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT column_name, data_type FROM information_schema.columns WHERE table_name=''employees'' AND column_name IN (''org_id'', ''assigned_client_id'') ORDER BY ordinal_position;\")",
      "Bash(alembic upgrade:*)",
      "Bash(alembic stamp:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"DROP TABLE IF EXISTS guard_applicants, job_applications, cv_purchases, generated_cvs, guard_ratings, incident_reports, leave_requests, marketplace_commissions, marketplace_settings, attendance, expenses, daily_occurrence_book, skills_matrix, employee_permissions, notification_preferences, bulk_hiring_packages, premium_job_postings, shift_groups, ob_entry, job_postings, cv_generations CASCADE;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT table_name, column_name FROM information_schema.columns WHERE column_name = ''org_id'' AND table_name IN (''employees'', ''clients'', ''sites'', ''shifts'', ''rosters'') ORDER BY table_name;\")",
      "Bash(python:*)",
      "Bash(timeout 5 echo:*)",
      "Bash(\"c:\\Users\\USER\\Documents\\Master Plan\\RostraCore\\backend\\app\\api\\endpoints\\superadmin_analytics.py\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT org_id, org_code, company_name, subscription_status FROM organizations WHERE org_code LIKE ''TEST%'';\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"DROP TABLE IF EXISTS marketplace_commissions, job_applications, cv_purchases, attendance, ab_test_assignments, ab_tests, incident_reports, ob_entries, guard_ratings, premium_job_postings, skills_matrix, guard_applicants, shift_groups, generated_cvs, analytics_daily_metrics, feature_usage_stats, customer_health_scores, expenses, rules_config, analytics_events, leave_requests, daily_occurrence_books, job_postings, bulk_hiring_packages CASCADE;\")",
      "Bash(alembic downgrade:*)",
      "Bash(del 68edf8c1ee2d_add_client_invoice_and_line_items_.py)",
      "Bash(timeout 10 python:*)",
      "Bash(nc localhost 8000:*)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(taskkill /F /PID 23112)",
      "Bash(taskkill:*)",
      "Bash(wmic process where \"ProcessId=23112\" get Name,ProcessId,CommandLine)",
      "Bash(wmic process:*)",
      "Bash(tasklist:*)",
      "Bash(git push:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT table_name FROM information_schema.tables WHERE table_schema=''public'' ORDER BY table_name;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"\\dt\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as total_users, COUNT(*) FILTER (WHERE is_superadmin = true) as superadmins FROM users;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -f create_test_data.sql)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT org_code, company_name, subscription_status FROM organizations WHERE org_code LIKE ''TEST%'';\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT username, email, is_superadmin FROM users WHERE username = ''superadmin'' OR username = ''testadmin'';\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as total_employees, COUNT(*) FILTER (WHERE status = ''ACTIVE'') as active_employees FROM employees;\")",
      "Bash(timeout 10 echo:*)",
      "Bash(curl:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as shift_count FROM shifts;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as employee_count FROM employees WHERE status = ''ACTIVE'';\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) FROM shifts;\" -t)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -f load_test_data.sql)",
      "Bash(timeout 10 curl:*)",
      "Bash(timeout 5 curl -X POST \"http://localhost:8001/api/v1/auth/login\" -H \"Content-Type: application/json\" -d \"{\"\"username\"\": \"\"testadmin\"\", \"\"password\"\": \"\"TestAdmin123!\"\"}\")",
      "Bash(timeout 5 curl:*)",
      "Bash(cat:*)",
      "Bash(timeout 60 python:*)",
      "Bash(nul)",
      "Bash(dir:*)",
      "Bash(del test_roster_simple.py)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT user_id, username, email, org_id, role FROM users WHERE username = ''testadmin'';\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -f fix_user_orgid.sql)",
      "Bash(npm run dev:*)",
      "Bash(uvicorn:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"UPDATE users SET org_id = (SELECT org_id FROM organizations WHERE org_code LIKE ''TEST%'' LIMIT 1) WHERE username = ''testadmin''; SELECT user_id, username, org_id FROM users WHERE username = ''testadmin'';\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as total_employees, org_id FROM employees GROUP BY org_id;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT c.certification_id, c.employee_id, c.cert_type, c.verified, c.expiry_date, c.psira_grade FROM certifications c INNER JOIN employees e ON c.employee_id = e.employee_id WHERE e.email LIKE ''guard%@test.com'' LIMIT 10;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT COUNT(*) as cert_count, COUNT(*) FILTER (WHERE verified = true) as verified_count FROM certifications;\")",
      "Bash(\"C:\\Program Files\\PostgreSQL\\14\\bin\\psql.exe\" -U postgres -d rostracore_db -c \"SELECT user_id, username, org_id FROM users WHERE username = ''testadmin'';\")",
      "Bash(cd:*)",
      "Bash(del /s /q __pycache__*.pyc 2)"
    ],
    "deny": [],
    "ask": []
  }
}
